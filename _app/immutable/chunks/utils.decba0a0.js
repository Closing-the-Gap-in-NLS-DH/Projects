import"./index.15dcdf50.js";import{w as r}from"./index.72eee438.js";const m=r([]),L=r({}),T=r({}),S=r({}),f=r(""),p=r("search"),c=r(new Set),E=r([]),d=globalThis.__sveltekit_bd1inr.env,g=d.PUBLIC_CTG_ARCHIVE&&d.PUBLIC_CTG_ARCHIVE.toLowerCase()==="true",u=g?"/Closing-The-Gap-In-Non-Latin-Script-Data/archive":"https://raw.githubusercontent.com/M-L-D-H/Closing-The-Gap-In-Non-Latin-Script-Data/master";async function _(a){const e=Object.keys(a),n=await(await fetch(`${u}/KEYWORDS/KEYWORDS.json`)).json();for(const[t,s]of Object.entries(n)){n[t]=s.sort();for(const i of s)e.includes(i)||(n[t]=n[t].filter(w=>w!==i))}return n}async function R(a){if(g)return await(await fetch(`${u}/ENTRIES.json`)).json();const e=Object.entries(a),o=[];for(const[t,s]of e)o.push(`${u}${s.path}${t}.json`);let n=await Promise.all(o.map(async t=>{const i=await(await fetch(t)).json();return[t,i]}));return n=n.sort((t,s)=>y(t[1],s[1])),n}async function $(){const e=await(await fetch(`${u}/PROJECTS.json`)).json();return[Object.keys(e).length,e]}async function A(){return await(await fetch(`${u}/TEMPLATES/project.json`)).json()}function I(a){return a.filter(e=>e.place_name.text)}function O(a){const e={};for(const[o,n]of a){const t=n.project.keywords;for(const s of t)e[s]?e[s].push(o):e[s]=[o]}return e}function P(a){const e={};for(const[o,n]of a){const t=n.project.research_data.lang;for(const s of t)e[s]?e[s].push(o):e[s]=[o]}return e}function D(){if(window.location.hash)if(window.location.hash.startsWith("#keywords=")){p.set("keywords");const e=window.location.hash.split("keywords=")[1].split(",");c.set(new Set(e))}else if(window.location.hash.startsWith("#languages=")){p.set("languages");const e=window.location.hash.split("languages=")[1].split(",");c.set(new Set(e))}else f.set(""),c.set(new Set);else f.set(""),c.set(new Set)}function H(){f.set(""),c.set(new Set),window.location.hash=""}function M(a,e){const o=e.toLowerCase(),n=[];for(const[t,s]of a){if(s.project.title.toLowerCase().includes(o)){n.push([t,s]);continue}if(s.project.abbr.toLowerCase().includes(o)){n.push([t,s]);continue}if(s.project.project_desc.toLowerCase().includes(o)){n.push([t,s]);continue}if(s.project.keywords.join(" ").includes(o)){n.push([t,s]);continue}let l="";for(const h of s.project.places)h.place_name.text&&(l+=h.place_name.text.toLowerCase(),l+=" ");if(l=l.trim(),l.includes(o)){n.push([t,s]);continue}}return n}function y(a,e){const o=a.project.title.toLowerCase(),n=e.project.title.toLowerCase();return o>n?1:o<n?-1:0}function v(a,e){c.update(t=>(t.has(e)?t.delete(e):t.add(e),t));let o=[];if(c.subscribe(t=>{o=Array.from(t)}),o.length===0){window.location.hash="";return}const n=o.join(",");window.location.hash=`#${a}=${n}`}export{p as a,c as b,M as c,E as d,m as e,T as f,$ as g,D as h,R as i,O as j,L as k,S as l,_ as m,P as n,I as o,A as p,H as r,f as s,v as u};

import{a as x}from"./axios-aba6f0e0.js";import{_ as N,d as O,o as i,b as l,g as n,F as k,k as w,h as j,t as C,e as P,n as $}from"./index-74413b2f.js";const F=O({components:{},setup(){const r=j([]),g=j([]),u=j([]);let m=new Date().getFullYear(),h=new Date().getFullYear();const v=()=>new Promise(s=>{x.get("https://raw.githubusercontent.com/Closing-the-Gap-in-NLS-DH/Projects/master/PROJECTS.json").then(e=>{Object.keys(e.data).map((o,p)=>{x.get(`https://raw.githubusercontent.com/Closing-the-Gap-in-NLS-DH/Projects/master${e.data[o].path}${o}.json`).then(c=>{const _=[];let D=!1;c.data.project.date.map(d=>{if(d.from!==""){let y=Number(d.from),b=-1;y<m&&(m=y),d.to!==""?b=Number(d.to):D=!0,b>h&&(h=b),_.push([y,b])}}),_.length&&u.value.push({title:c.data.project.title,periods:_,noDataOnEnding:D,source:`https://github.com/Closing-the-Gap-in-NLS-DH/Projects/blob/master${e.data[o].path}${o}.json`}),c.data.project.keywords.map(d=>{r.value.includes(d)||r.value.push(d)}),p===Object.keys(e.data).length-1&&s("ready")})})})}),a=(t,s)=>{let e=!1;return t.periods.map(o=>{s>=o[0]&&s<=o[1]&&(e=!0)}),e},f=(t,s)=>{const e=[...s],o=[];return t.periods.map(p=>{for(let c=p[0]+1;c<=p[1];c+=1)o.push(c)}),o.map(p=>{e.splice(e.indexOf(p),1)}),t.title.includes("Topoi")&&console.log(e),e};return v().then(()=>{for(let t=m;t<=h;t+=1)g.value.push(t);u.value.map((t,s)=>{t.periods.map((e,o)=>{e[1]===-1&&(u.value[s].periods[o][1]=h)})}),u.value.sort((t,s)=>t.title>s.title?1:t.title<s.title?-1:0)}).catch(t=>{console.log(t)}),{projects:u,years:g,isInFundingPeriod:a,filteredProjectYears:f}}}),E={class:"visualbox w-full p-5"},T={class:"box table-fixed"},S={class:"sticky top-0"},L=["colspan"],Y=n("p",null," CAUTION! This timeline contains projects for which we do not have consistent funding information yet. Projects with unknown or incomplete funding data are marked with an asterisk (*). ",-1),B=[Y],G={class:"table-head sticky border-y"},H=n("th",null,"Project",-1),V={class:"relative"},A={class:"first-col sticky whitespace-nowrap p-2 text-left text-xs"},z=["href"],J={key:0};function R(r,g,u,m,h,v){return i(),l("div",E,[n("table",T,[n("thead",S,[n("tr",null,[n("th",{colspan:r.years.length+1,class:"sticky top-0 py-5 px-3 text-left"},B,8,L)]),n("tr",G,[H,(i(!0),l(k,null,w(r.years,(a,f)=>(i(),l("th",{key:f,class:"sticky top-0 border-l px-3 pb-1 text-xs"},C(a),1))),128))])]),n("tbody",V,[(i(!0),l(k,null,w(r.projects,(a,f)=>(i(),l("tr",{key:f,class:"timeline-row border-b"},[n("td",A,[n("a",{href:a.source,target:"_blank"},C(a.title),9,z),a.noDataOnEnding?(i(),l("span",J,"*")):P("",!0)]),(i(!0),l(k,null,w(r.years,(t,s)=>(i(),l("td",{key:s,class:$([r.isInFundingPeriod(a,t)&&!a.noDataOnEnding?"bg-darkblue border-b-1 border-darkblue p-2":"","m-1 border-l p-0 text-xs"])},null,2))),128))]))),128))])])])}const I=N(F,[["render",R]]);export{I as default};

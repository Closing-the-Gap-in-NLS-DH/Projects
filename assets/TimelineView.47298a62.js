import{_ as N,d as O,o as i,b as l,g as n,F as w,k as j,h as m,u as P,t as x,e as $,n as F}from"./index.b8de8ded.js";import{a as C}from"./index.becf6c0c.js";const E=O({components:{},setup(){const r=m([]);P(),m([]),m([]);const y=m([]),u=m([]);let g=new Date().getFullYear(),h=new Date().getFullYear();const v=()=>(console.log("Begin to load data"),new Promise(s=>{C.get("https://raw.githubusercontent.com/Closing-the-Gap-in-NLS-DH/Projects/master/PROJECTS.json").then(e=>{Object.keys(e.data).map((o,p)=>(C.get(`https://raw.githubusercontent.com/Closing-the-Gap-in-NLS-DH/Projects/master${e.data[o].path}${o}.json`).then(b=>{const c=[];let D=!1;return b.data.project.date.map(d=>{if(d.from!==""){let k=Number(d.from),_=-1;k<g&&(g=k),d.to!==""?_=Number(d.to):D=!0,_>h&&(h=_),c.push([k,_])}}),c.length&&u.value.push({title:b.data.project.title,periods:c,noDataOnEnding:D,source:`https://github.com/Closing-the-Gap-in-NLS-DH/Projects/blob/master${e.data[o].path}${o}.json`}),b.data.project.keywords.map(d=>{r.value.includes(d)||r.value.push(d)}),p===Object.keys(e.data).length-1&&s("ready"),null}),null))})})),a=(t,s)=>{let e=!1;return t.periods.map(o=>{s>=o[0]&&s<=o[1]&&(e=!0)}),e},f=(t,s)=>{const e=[...s],o=[];return t.periods.map((p,b)=>{for(let c=p[0]+1;c<=p[1];c+=1)o.push(c)}),o.map(p=>{e.splice(e.indexOf(p),1)}),t.title.includes("Topoi")&&console.log(e),e};return v().then(()=>{for(let t=g;t<=h;t+=1)y.value.push(t);u.value.map((t,s)=>{t.periods.map((e,o)=>{e[1]===-1&&(u.value[s].periods[o][1]=h)})}),u.value.sort((t,s)=>t.title>s.title?1:t.title<s.title?-1:0)}).catch(t=>{console.log(t)}),{projects:u,years:y,isInFundingPeriod:a,filteredProjectYears:f}}}),T={class:"w-full visualbox p-5"},S={class:"table-fixed box"},B={class:"sticky top-0"},L=["colspan"],Y=n("p",null," CAUTION! This timeline contains projects of which we do not have consistent funding information yet. Projects with unknown or incomplete funding data are marked with an asterisk (*) ",-1),G=[Y],H={class:"border-y table-head sticky"},V=n("th",null,"Project",-1),A={class:"relative"},R={class:"whitespace-nowrap text-xs text-left first-col sticky p-2"},z=["href"],J={key:0};function K(r,y,u,g,h,v){return i(),l("div",T,[n("table",S,[n("thead",B,[n("tr",null,[n("th",{colspan:r.years.length+1,class:"text-left py-5 px-3 sticky top-0"},G,8,L)]),n("tr",H,[V,(i(!0),l(w,null,j(r.years,(a,f)=>(i(),l("th",{key:f,class:"border-l text-xs px-3 pb-1 sticky top-0"},x(a),1))),128))])]),n("tbody",A,[(i(!0),l(w,null,j(r.projects,(a,f)=>(i(),l("tr",{key:f,class:"border-b timeline-row"},[n("td",R,[n("a",{href:a.source,target:"_blank"},x(a.title),9,z),a.noDataOnEnding?(i(),l("span",J,"*")):$("",!0)]),(i(!0),l(w,null,j(r.years,(t,s)=>(i(),l("td",{key:s,class:F([r.isInFundingPeriod(a,t)&&!a.noDataOnEnding?"bg-darkblue p-2 border-b-1 border-darkblue":"","m-1 p-0 text-xs border-l"])},null,2))),128))]))),128))])])])}var I=N(E,[["render",K]]);export{I as default};

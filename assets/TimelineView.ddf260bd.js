import{_ as N,d as O,o as i,b as l,g as n,F as w,k as j,h as m,u as P,t as x,e as $,n as F}from"./index.0e410f0e.js";import{a as C}from"./index.ff02325d.js";const E=O({components:{},setup(){const r=m([]);P(),m([]),m([]);const y=m([]),u=m([]);let b=new Date().getFullYear(),h=new Date().getFullYear();const v=()=>new Promise(s=>{C.get("https://raw.githubusercontent.com/Closing-the-Gap-in-NLS-DH/Projects/master/PROJECTS.json").then(e=>{Object.keys(e.data).map((o,p)=>(C.get(`https://raw.githubusercontent.com/Closing-the-Gap-in-NLS-DH/Projects/master${e.data[o].path}${o}.json`).then(g=>{const c=[];let D=!1;return g.data.project.date.map(d=>{if(d.from!==""){let k=Number(d.from),_=-1;k<b&&(b=k),d.to!==""?_=Number(d.to):D=!0,_>h&&(h=_),c.push([k,_])}}),c.length&&u.value.push({title:g.data.project.title,periods:c,noDataOnEnding:D,source:`https://github.com/Closing-the-Gap-in-NLS-DH/Projects/blob/master${e.data[o].path}${o}.json`}),g.data.project.keywords.map(d=>{r.value.includes(d)||r.value.push(d)}),p===Object.keys(e.data).length-1&&s("ready"),null}),null))})}),a=(t,s)=>{let e=!1;return t.periods.map(o=>{s>=o[0]&&s<=o[1]&&(e=!0)}),e},f=(t,s)=>{const e=[...s],o=[];return t.periods.map((p,g)=>{for(let c=p[0]+1;c<=p[1];c+=1)o.push(c)}),o.map(p=>{e.splice(e.indexOf(p),1)}),t.title.includes("Topoi")&&console.log(e),e};return v().then(()=>{for(let t=b;t<=h;t+=1)y.value.push(t);u.value.map((t,s)=>{t.periods.map((e,o)=>{e[1]===-1&&(u.value[s].periods[o][1]=h)})}),u.value.sort((t,s)=>t.title>s.title?1:t.title<s.title?-1:0)}).catch(t=>{console.log(t)}),{projects:u,years:y,isInFundingPeriod:a,filteredProjectYears:f}}}),T={class:"visualbox w-full p-5"},S={class:"box table-fixed"},L={class:"sticky top-0"},Y=["colspan"],B=n("p",null," CAUTION! This timeline contains projects of which we do not have consistent funding information yet. Projects with unknown or incomplete funding data are marked with an asterisk (*) ",-1),G=[B],H={class:"table-head sticky border-y"},V=n("th",null,"Project",-1),A={class:"relative"},R={class:"first-col sticky whitespace-nowrap p-2 text-left text-xs"},z=["href"],J={key:0};function K(r,y,u,b,h,v){return i(),l("div",T,[n("table",S,[n("thead",L,[n("tr",null,[n("th",{colspan:r.years.length+1,class:"sticky top-0 py-5 px-3 text-left"},G,8,Y)]),n("tr",H,[V,(i(!0),l(w,null,j(r.years,(a,f)=>(i(),l("th",{key:f,class:"sticky top-0 border-l px-3 pb-1 text-xs"},x(a),1))),128))])]),n("tbody",A,[(i(!0),l(w,null,j(r.projects,(a,f)=>(i(),l("tr",{key:f,class:"timeline-row border-b"},[n("td",R,[n("a",{href:a.source,target:"_blank"},x(a.title),9,z),a.noDataOnEnding?(i(),l("span",J,"*")):$("",!0)]),(i(!0),l(w,null,j(r.years,(t,s)=>(i(),l("td",{key:s,class:F([r.isInFundingPeriod(a,t)&&!a.noDataOnEnding?"bg-darkblue border-b-1 border-darkblue p-2":"","m-1 border-l p-0 text-xs"])},null,2))),128))]))),128))])])])}const I=N(E,[["render",K]]);export{I as default};
